 ! BEGIN
! Command: "show current-config message-vpn default"
! Generated by:
!   Username: "appuser"
!   Date: "2022-09-18T09:04:02.348Z"
!   Version: "100.0distributed_tracing_1_1.0.261"
!   dbVersion: "148"
!   SEMP Schema Version: "soltr/10_0_1VMR"
!   Unlocked Features:
!   Router: "solbroker"

! pragma:interpreter:relaxed-db-restore

home
enable
configure

! Just Create Client Profile: "elided"
! pragma:interpreter:ignore-already-exists
create client-profile "elided" message-vpn "default"
! pragma:interpreter:no-ignore-already-exists
  exit

! Create Message Vpn: "default"
message-vpn "default"
  no alias
  authentication
    basic auth-type internal
    no basic radius-domain
    no basic shutdown
    client-certificate
      matching-rules
        shutdown
        exit
      validate-certificate-date
      no allow-api-provided-username
      max-certificate-chain-depth 3
      shutdown
      username-source "common-name"
      exit
    oauth default-profile ""
    no oauth default-provider
    oauth shutdown
    exit
  authorization
    ldap group-membership-attribute-name "memberOf"
    no ldap trim-client-username-domain
    authorization-type internal
    exit
  no bridging ssl server-certificate-validation enforce-trusted-common-name
  bridging ssl server-certificate-validation max-certificate-chain-depth 3
  bridging ssl server-certificate-validation validate-certificate-date
  bridging ssl server-certificate-validation validate-server-name
  distributed-cache-management
  no export-policy export-subscriptions
  max-connections 100
  max-subscriptions 500000
  no semp-over-msgbus shutdown
  no semp-over-msgbus show-cmds shutdown
  no semp-over-msgbus admin-cmds shutdown
  no semp-over-msgbus admin-cmds distributed-cache-cmds shutdown
  no semp-over-msgbus admin-cmds client-cmds shutdown
  service smf max-connections 100
  no service smf plain-text shutdown
  no service smf ssl shutdown
  service web-transport authentication client-certificate request-client-certificate "when-enabled-in-message-vpn"
  service web-transport max-connections 100
  no service web-transport plain-text shutdown
  no service web-transport ssl shutdown
  service rest incoming authentication client-certificate request-client-certificate "when-enabled-in-message-vpn"
  service rest incoming authorization-header-handling "drop"
  service rest incoming max-connections 100
  service rest incoming listen-port 9000
  no service rest incoming plain-text shutdown
  service rest incoming listen-port 9443 ssl
  no service rest incoming ssl shutdown
  service rest mode messaging
  service rest outgoing max-connections 100
  service mqtt authentication client-certificate request-client-certificate "when-enabled-in-message-vpn"
  service mqtt max-connections 100
  service mqtt listen-port 1883
  no service mqtt plain-text shutdown
  service mqtt listen-port 8883 ssl
  no service mqtt ssl shutdown
  service mqtt listen-port 8000 web
  no service mqtt websocket shutdown
  service mqtt listen-port 8443 ssl web
  no service mqtt websocket-secure shutdown
  service amqp max-connections 100
  service amqp listen-port 5672
  no service amqp plain-text shutdown
  service amqp listen-port 5671 ssl
  no service amqp ssl shutdown
  event connections thresholds set-percentage 80 clear-percentage 60
  event service smf connections thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections thresholds set-percentage 80 clear-percentage 60
  event service rest incoming connections thresholds set-percentage 80 clear-percentage 60
  event service mqtt connections thresholds set-percentage 80 clear-percentage 60
  event service amqp connections thresholds set-percentage 80 clear-percentage 60
  event egress-message-rate thresholds set-value 4000000 clear-value 3000000
  event ingress-message-rate thresholds set-value 4000000 clear-value 3000000
  event large-message-threshold 1024
  no event log-tag
  event publish-client
  event publish-message-vpn
  event publish-topic-format smf
  no event publish-subscription
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  replication
    ack-propagation interval messages 20
    no ack-propagation shutdown
    transaction-replication-mode "async"
    bridge authentication auth-scheme "Basic"
    no bridge authentication basic client-username
    no bridge compressed-data
    no bridge ssl
    bridge message-spool window-size 255
    bridge retry-delay 3
    bridge unidirectional client-profile "#client-profile"
    queue max-spool-usage 1500
    queue reject-msg-to-sender-on-discard
    exit
  rest
    no ssl server-certificate-validation enforce-trusted-common-name
    ssl server-certificate-validation max-certificate-chain-depth 3
    ssl server-certificate-validation validate-certificate-date
    ssl server-certificate-validation validate-server-name
    exit
  no ssl allow-downgrade-to-plain-text
  dynamic-message-routing
    no shutdown
    exit
  mqtt retain max-memory -1
  exit

! Create Client Profile: "default"
client-profile "default" message-vpn "default"
  allow-bridge-connections
  allow-shared-subscriptions
  eliding delay 3000
  eliding max-topics 256
  no eliding shutdown
  service min-keepalive-timeout 30
  service smf max-connections-per-client-username 100
  no service smf min-keepalive-enabled
  service web-transport inactive-timeout 30
  service web-transport max-web-payload 1000000
  service web-transport max-connections-per-client-username 100
  max-connections-per-client-username 100
  max-subscriptions 50000
  message-spool allow-guaranteed-endpoint-create
  message-spool allow-guaranteed-endpoint-create-durability "all"
  message-spool allow-guaranteed-message-receive
  message-spool allow-guaranteed-message-send
  message-spool allow-transacted-sessions
  message-spool max-transacted-sessions 10
  message-spool max-transactions 5000
  message-spool max-messages-per-transaction 256
  message-spool max-endpoints-per-client-username 1000
  message-spool max-egress-flows 1000
  message-spool max-ingress-flows 1000
  no message-spool api-queue-management copy-from-on-create
  no message-spool api-queue-management copy-from-template-on-create
  no message-spool api-topic-endpoint-management copy-from-on-create
  no message-spool api-topic-endpoint-management copy-from-template-on-create
  message-spool reject-msg-to-sender-on-no-subscription-match
  queue "G-1"
    max-depth 20000
    min-msg-burst 255
    exit
  queue "D-1"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-2"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-3"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "C-1"
    max-depth 20000
    min-msg-burst 4
    exit
  tcp initial-cwnd 2
  tcp keepalive count 5
  tcp keepalive idle 3
  tcp keepalive interval 1
  tcp max-wnd 256
  tcp mss 1460
  event connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service smf connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  event client-provisioned-endpoint-spool-usage thresholds set-percentage 25 clear-percentage 18
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints-per-client-username thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  no replication allow-clients-when-standby
  ssl allow-downgrade-to-plain-text
  no compression shutdown
  exit

! Create Client Profile: "elided"
client-profile "elided" message-vpn "default"
  no allow-bridge-connections
  allow-shared-subscriptions
  eliding delay 3000
  eliding max-topics 256
  no eliding shutdown
  service min-keepalive-timeout 30
  service smf max-connections-per-client-username 100
  no service smf min-keepalive-enabled
  service web-transport inactive-timeout 30
  service web-transport max-web-payload 1000000
  service web-transport max-connections-per-client-username 100
  max-connections-per-client-username 100
  max-subscriptions 50000
  no message-spool allow-guaranteed-endpoint-create
  message-spool allow-guaranteed-endpoint-create-durability "all"
  message-spool allow-guaranteed-message-receive
  message-spool allow-guaranteed-message-send
  no message-spool allow-transacted-sessions
  message-spool max-transacted-sessions 10
  message-spool max-transactions 5000
  message-spool max-messages-per-transaction 256
  message-spool max-endpoints-per-client-username 1000
  message-spool max-egress-flows 1000
  message-spool max-ingress-flows 1000
  no message-spool api-queue-management copy-from-on-create
  no message-spool api-queue-management copy-from-template-on-create
  no message-spool api-topic-endpoint-management copy-from-on-create
  no message-spool api-topic-endpoint-management copy-from-template-on-create
  no message-spool reject-msg-to-sender-on-no-subscription-match
  queue "G-1"
    max-depth 20000
    min-msg-burst 255
    exit
  queue "D-1"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-2"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-3"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "C-1"
    max-depth 20000
    min-msg-burst 4
    exit
  tcp initial-cwnd 2
  tcp keepalive count 5
  tcp keepalive idle 3
  tcp keepalive interval 1
  tcp max-wnd 256
  tcp mss 1460
  event connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service smf connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  event client-provisioned-endpoint-spool-usage thresholds set-percentage 25 clear-percentage 18
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints-per-client-username thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  no replication allow-clients-when-standby
  ssl allow-downgrade-to-plain-text
  no compression shutdown
  exit

! Create Message Spool: "default"
message-spool message-vpn "default"
  max-spool-usage 1500
  max-transacted-sessions 1000
  max-transactions 5000
  max-endpoints 1000
  max-egress-flows 1000
  max-ingress-flows 1000
  event spool-usage thresholds set-percentage 80 clear-percentage 60
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  exit

! Create MQTT Sessions: 

! Create MQTT Retain Cache: 

! Create Endpoints: "default"
message-spool message-vpn "default"
  create queue "q-aggregator" is-well-known
    access-type "non-exclusive"
    max-bind-count 8
    max-delivered-unacked-msgs-per-flow 10000
    max-message-size 10000000
    max-spool-usage 5000
    redelivery
    max-redelivery 0
    no delivery-count
    delivery-delay 0
    reject-msg-to-sender-on-discard
    reject-low-priority-msg-limit 0
    event bind-count thresholds set-percentage 80 clear-percentage 60
    event reject-low-priority-msg-limit thresholds set-percentage 80 clear-percentage 60
    event spool-usage thresholds set-percentage 25 clear-percentage 18
    no owner
    dead-message-queue "#DEAD_MSG_QUEUE"
    permission all delete
    no respect-message-priority
    no respect-ttl
    no max-ttl
    no reject-low-priority-msg
    subscription topic "reply/>" 
    no shutdown ingress
    no shutdown egress
    exit
  create queue "q-dashboard-delayed" is-well-known
    access-type "exclusive"
    max-bind-count 8
    max-delivered-unacked-msgs-per-flow 10000
    max-message-size 10000000
    max-spool-usage 5000
    redelivery
    max-redelivery 0
    no delivery-count
    delivery-delay 15
    reject-msg-to-sender-on-discard
    reject-low-priority-msg-limit 0
    event bind-count thresholds set-percentage 80 clear-percentage 60
    event reject-low-priority-msg-limit thresholds set-percentage 80 clear-percentage 60
    event spool-usage thresholds set-percentage 25 clear-percentage 18
    no owner
    dead-message-queue "#DEAD_MSG_QUEUE"
    permission all delete
    no respect-message-priority
    no respect-ttl
    no max-ttl
    no reject-low-priority-msg
    subscription topic "players/aggregatedStats" 
    no shutdown ingress
    no shutdown egress
    exit
  create queue "q-replay" is-well-known
    access-type "exclusive"
    max-bind-count 8
    max-delivered-unacked-msgs-per-flow 10000
    max-message-size 10000000
    max-spool-usage 5000
    redelivery
    max-redelivery 0
    no delivery-count
    delivery-delay 0
    reject-msg-to-sender-on-discard
    reject-low-priority-msg-limit 0
    event bind-count thresholds set-percentage 80 clear-percentage 60
    event reject-low-priority-msg-limit thresholds set-percentage 80 clear-percentage 60
    event spool-usage thresholds set-percentage 25 clear-percentage 18
    no owner
    dead-message-queue "#DEAD_MSG_QUEUE"
    permission all delete
    no respect-message-priority
    no respect-ttl
    no max-ttl
    no reject-low-priority-msg
    subscription topic "reply/*/>" external
    no shutdown ingress
    no shutdown egress
    exit
  create queue "q-reply" is-well-known
    access-type "exclusive"
    max-bind-count 10
    max-delivered-unacked-msgs-per-flow 10000
    max-message-size 10000000
    max-spool-usage 5000
    redelivery
    max-redelivery 0
    no delivery-count
    delivery-delay 0
    reject-msg-to-sender-on-discard
    reject-low-priority-msg-limit 0
    event bind-count thresholds set-percentage 80 clear-percentage 60
    event reject-low-priority-msg-limit thresholds set-percentage 80 clear-percentage 60
    event spool-usage thresholds set-percentage 25 clear-percentage 18
    no owner
    dead-message-queue "#DEAD_MSG_QUEUE"
    permission all delete
    no respect-message-priority
    no respect-ttl
    no max-ttl
    no reject-low-priority-msg
    no shutdown ingress
    no shutdown egress
    exit
  create queue "q-request" is-well-known
    access-type "exclusive"
    max-bind-count 10
    max-delivered-unacked-msgs-per-flow 10000
    max-message-size 10000000
    max-spool-usage 5000
    redelivery
    max-redelivery 0
    no delivery-count
    delivery-delay 0
    reject-msg-to-sender-on-discard
    reject-low-priority-msg-limit 0
    event bind-count thresholds set-percentage 80 clear-percentage 60
    event reject-low-priority-msg-limit thresholds set-percentage 80 clear-percentage 60
    event spool-usage thresholds set-percentage 25 clear-percentage 18
    no owner
    dead-message-queue "q-watcher"
    permission all delete
    no respect-message-priority
    respect-ttl
    max-ttl 8
    no reject-low-priority-msg
    no shutdown ingress
    no shutdown egress
    exit
  create queue "q-server" is-well-known
    access-type "non-exclusive"
    max-bind-count 32
    max-delivered-unacked-msgs-per-flow 9
    max-message-size 10000000
    max-spool-usage 5000
    redelivery
    max-redelivery 0
    no delivery-count
    delivery-delay 0
    reject-msg-to-sender-on-discard
    reject-low-priority-msg-limit 0
    event bind-count thresholds set-percentage 80 clear-percentage 60
    event reject-low-priority-msg-limit thresholds set-percentage 80 clear-percentage 60
    event spool-usage thresholds set-percentage 25 clear-percentage 18
    no owner
    dead-message-queue "q-watcher"
    permission all delete
    no respect-message-priority
    respect-ttl
    max-ttl 8
    no reject-low-priority-msg
    subscription topic "request/>" 
    no shutdown ingress
    no shutdown egress
    exit
  create queue "q-watcher" is-well-known
    access-type "non-exclusive"
    max-bind-count 8
    max-delivered-unacked-msgs-per-flow 10000
    max-message-size 10000000
    max-spool-usage 5000
    redelivery
    max-redelivery 0
    no delivery-count
    delivery-delay 0
    reject-msg-to-sender-on-discard
    reject-low-priority-msg-limit 0
    event bind-count thresholds set-percentage 80 clear-percentage 60
    event reject-low-priority-msg-limit thresholds set-percentage 80 clear-percentage 60
    event spool-usage thresholds set-percentage 25 clear-percentage 18
    no owner
    dead-message-queue "#DEAD_MSG_QUEUE"
    permission all delete
    no respect-message-priority
    no respect-ttl
    no max-ttl
    no reject-low-priority-msg
    no shutdown ingress
    no shutdown egress
    exit
  exit

! Create MQTT Session Queues: "default"

! Create MQTT Session Subscriptions: "default"

! Create ACL Profile: "default"
acl-profile "default" message-vpn "default"
  client-connect default-action "allow"
  publish-topic default-action "allow"
  subscribe-topic default-action "allow"
  subscribe-share-name default-action "allow"
  exit

! Create Client Username: "default"
client-username "default" message-vpn "default"
  acl-profile "default"
  client-profile "default"
  no guaranteed-endpoint-permission-override
  aes-password "MJCFVdM7mM9Psew0FJxoLHR/a/BcfY0QdYAKNo1CYWMO/nQu+HpbKxNxCXgK0Ui7zLwtKTp0Ye/rBH3uqbxP6CgS5plVS0jgM2rMpVxelpSognXJBOqgbb8l6XTL4W5ZZKplCuwlzy9YZBlLno0YWYm3UQ5S40B4dNW+hOEDR+c="
  no subscription-manager
  no shutdown
  exit

! Create Client Username: "testguy"
create client-username "testguy" message-vpn "default"
  acl-profile "default"
  client-profile "elided"
  no guaranteed-endpoint-permission-override
  aes-password "yXUijGz6av2v8dO3fg+erz/Ul80t2sYmAwtmz+jt7rcXiWvUKLQ8KjntZkQZG2/zFGgKdFl0q81olUXTgOiU0oiXy8mJaaOisR19XSvIq9McaWqBDcuVDHp3X/i2knfbQfAiBYvKsSoRueF18bf7axIYSXj8KseMUjFE4Eha5Jk="
  no subscription-manager
  no shutdown
  exit

! Create JNDI: "default"
! pragma:interpreter:ignore-already-exists
jndi message-vpn "default"
  create connection-factory "/jms/cf/default"
    property-list "messaging-properties"
      property "default-delivery-mode" "persistent"
      property "text-msg-xml-payload" "true"
      property "default-dmq-eligible" "false"
      property "default-eliding-eligible" "false"
      property "xa" "true"
      property "jmsx-user-id-enabled" "false"
      exit
    property-list "transport-properties"
      property "connect-timeout" "30000"
      property "read-timeout" "10000"
      property "reconnect-retries" "3"
      property "reconnect-retry-wait" "3000"
      property "keep-alive-enabled" "true"
      property "keep-alive-interval" "3000"
      property "keep-alive-count-max" "3"
      property "send-buffer" "65536"
      property "receive-buffer" "65536"
      property "tcp-no-delay" "true"
      property "direct-transport" "false"
      property "compression-level" "-1"
      property "port" "-1"
      property "optimize-direct" "false"
      property "msg-callback-on-io-thread" "false"
      property "connect-retries-per-host" "0"
      property "connect-retries" "0"
      exit
    property-list "ad-properties"
      property "send-ad-window-size" "255"
      property "send-ack-timer" "2000"
      property "send-max-resends" "30"
      property "receive-ad-window-size" "18"
      property "receive-ack-timer" "1000"
      property "receive-ack-threshold" "60"
      property "receive-reconnect-retries" "-1"
      property "receive-reconnect-retry-wait" "3000"
      exit
    property-list "deliver-to-one-properties"
      property "subscriber-local-priority" "1"
      property "subscriber-network-priority" "1"
      property "deliver-to-one" "false"
      property "deliver-to-one-override" "true"
      exit
    property-list "dynamic-endpoint-properties"
      property "dynamic-durables" "false"
      property "respect-ttl" "true"
      exit
    property-list "client-properties"
      no property client-id
      no property client-description
      property "allow-duplicate-client-id" "false"
      exit
    exit
! pragma:interpreter:no-ignore-already-exists
  no shutdown
  exit

! Create Replay Log: "default"
message-spool message-vpn "default"
  create replay-log "defaultLog"
    max-spool-usage 5988
    no shutdown ingress
    no shutdown egress
    topic-filter
      shutdown
      exit
    exit
  exit

! Create Oauth Providers: "default"

! Create Oauth Profiles: "default"

! Create Queue Templates: "default"

! Create Topic Endpoint Templates: "default"

! Enable Message Vpn: "default"
message-vpn "default"
  no shutdown
  replication
    state "standby"
    shutdown
    exit
  exit

! END
